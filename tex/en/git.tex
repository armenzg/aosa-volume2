\begin{aosachapter}{Git}{s:git}{Susan Potter}

Dear Editors: Still outliney, but fleshed out a little more since last time\ldots

Git is an open source distributed Version Control System (dVCS) that was 
born out of the needs and frustrations of the Linux Kernel development
community in 2005.

Git enables the management of a digital body of work (often, 
but not limited to code) across a peer-to-peer network of 
collaborating repositories. It supports distributed workflows to 
manage a body of work that is either eventually converging or 
intentionally diverging in nature. A feat not easily accomplished
using a centralized Version Control System (VCS) such as CVS or
Subversion, the two most popular open source centralized VCS 
projects.

\begin{aosasect1}{History}
To understand Git better it is helpful to understand the circumstances
from which the Git project was started in the Linux Kernel community.
The painpoints of the Linux developer community can be traced back to the 
late 1990s when Torvalds and other core developers voiced concerns 
about managing the Linux Kernel codebase with many contributed patches
in the open source centralized VCSes available to them at that time.

Between 2002 and 2005 many of the core developers of the Linux 
Kernel opted to use BitKeeper, a proprietary dVCS made by BitMover Inc.
This was a contraversial move by arguably the best known open source 
project at that time, a decision questioned by Richard Stallman, the GNU 
project founder. Several key Linux Kernel developers (including Alan Cox) 
refused to use BitKeeper, voicing concerns over the proprietary Bitmover 
license. BitMover provided a way for the Linux BitKeeper servers to 
interoperate with the Linux CVS server in limited ways plus it offered a 
public release and free use of its servers to a shortlist of free and 
open source projects. For roughly three years the Linux Kernel would be 
maintained across two VCS systems in this way.

This ended after the first half of 2005, when BitMover retracted its 
"Free Use" version for many of the Linux Kernel developers and Git was born
to fill the void.

In April 2005, days after the BitMover announcement, Linus Torvalds began
development in haste of what was to become Git as we know it today. He began 
by writing a collection of scripts to help him manage lists of email patches
to apply one after the other. The aim of this initial collection of scripts 
was to fail merges quickly so the maintainer could modify the codebase to 
continue merging contributed patches one after the other.

Torvald's goals for Git from the outset were:
\begin{aosaitemize}
  \item Be the anti-CVS
  \item Support distributed workflows like those enabled by BitKeeper
  \item Provide strong safeguards against corruption
  \item Provide high performance
\end{aosaitemize}

\begin{aosasect1}{Version Control Landscape}

This section will describe the two primary classification dimensions to 
Version Control Systems (VCS) today:

\begin{aosaitemize}
  \item Distribution mode: local, client/server, distributed
  \item Storage mode: changeset based vs directed acyclic graph (DAG) based
\end{aosaitemize}

Provide examples of difference VCSes and how they fit in to these 
classifications, e.g. Subversion (client/server + changeset), Mercurial 
(distributed + changeset), BitKeeper (client/server + DAG), etc.

\end{aosasect1}

\begin{aosasect1}{Gitting Started}

Here I will describe the most rudimentary workflow of installing, configuring 
and cloning a remote Git repository. Then explain on a low-level what happened.

Describe the three main elements of a Git working environment:
\begin{aosaitemize}
  \item Repository (object database): default at #{projectdir}/.git subdirectory
  \item Working area: default at #{projectdir} excluding .git subdirectory
  \item Index: default at #{projectdir}/.git/index file
\end{aosaitemize}

Basic steps:
\begin{aosaitemize}
  \item sudo yum install git-core
  \item git config --global user.name ``Your Name''
  \item git config --global user.email ``user@emaildomain.com''
  \item cat #{HOME}/.gitconfig
  \item git clone remote-repo-url
\end{aosaitemize}

Mention the different protocols that can be used with Git, e.g. ssh, http, 
https, git, file and even rsync. Broadly discuss pros and cons of each.

Protocols notes: 
\begin{aosaitemize}
  \item file:// local repository easiest to setup, usuallly only useful for
    one author environment
  \item ssh:// most common for active development and easy to setup team repository
  \item http:// good for open source pull based (consumers) users, can setup with 
    WebDAV support for allowing pushes, but more work. Good for working in
    restricted public networks where SSH ports may be blocked.
  \item https:// same as http except encrypts pulls and pushes over the wire.
  \item git:// lightweight protocol useful in an enclosed and trusted local network
  \item rsync:// hardly used.
\end{aosaitemize}

\end{aosasect1}

\begin{aosasect1}{Gitting Down \& Dirty}

Start with simplest of workflows: purely LOCAL. One author/editor local repo,
multiple contributors receive bundle of their branch from author/editor.
Contributors submit patches to author/editor (via email or ticketing system):
1. Contributor: git format-patch origin/master --stdout > my-feature.patch
2. Author: git am < my-feature.patch

Notice how GIT\_AUTHOR\_NAME and GIT\_AUTHOR\_EMAIL use the contributors
values and the editor's information is in GIT\_COMMITTER\_NAME, etc.

Make sure to cover: git config|init|add|commit|status|branch|tag|log|
format-patch|am|merge|rebase|bundle|diff

% This is how to include a figure using the AOSA styles already configured
%\aosafigure{../images/git/distworkflow.eps}{Distributed VCS}{fig.git.dvcs}

Discussion on distributed workflows\ldots

Introduce Git Flow workflow as a common one used in the Git community. Provide
a realistic example. Plus I need to create good diagrams to explain things
better.

Then introduce the ``fork'' workflow which is commonly seen on GitHub and
used by OSS projects.

Then introduce the tiered/curated workflow where a release engineer/manager
is gatekeeper. production-like environments do not have development branches
visible to them at all. More locked-down.

Then introduce the GitHub model with ``forks''.

\end{aosasect1}

\begin{aosasect1}{Deploying with Git}

Here talk a little more about 'git bundle' and git shallow clones, e.g.
git clone --depth N #{GIT\_URL}, where N is the number of parents.

Demonstrate with a repository that shows significant benefit to using
bundle in conjunction with shallow clones as a way to provide portable
shall git repositories that allow deployment agents to transfer/receive
minimal bytes over the wires AND have ability to do rollbacks in severe
cases where a release does not go as planned.

\end{aosasect1}

\end{aosachapter}
